!function(){"use strict";function a(a,b){for(var c=!1,d=0;d<a.length;d++)if(c=b(a[d],d,a))return c;return c}function b(b){return function(c){function d(){return a(b,function(a){var b=a.re.exec(c);if(b){var d=b[0];return c=c.slice(d.length),{raw:d,matched:a.f(b,f)}}})}for(var e=[],f=1;""!==c;){var g=d();if(!g){var h=new SyntaxError("Unexpected character: "+c[0]);throw h.line=f,h}g.matched.line=f,f+=g.raw.replace(/[^\n]/g,"").length,e.push(g.matched)}return e}}function c(a){function b(a){return function(b){return{type:a,match:b[0]}}}function c(a){var b=a[1].replace(/([^'\\]|\\['bnrtf\\]|\\u[0-9a-fA-F]{4})/g,function(a){return'"'===a?'\\"':"\\'"===a?"'":a});return{type:"string",match:'"'+b+'"',value:JSON.parse('"'+b+'"')}}function d(a){return{type:"string",match:a[0],value:JSON.parse(a[0])}}function e(a){return{type:"string",value:a[0],match:'"'+a[0].replace(/./g,function(a){return"\\"===a?"\\\\":a})+'"'}}function f(a){return{type:" ",match:a[0].replace(/./g,function(a){return/\s/.test(a)?a:" "})}}function g(a){return{type:"number",match:a[0],value:parseFloat(a[0])}}var h=[{re:/^\s+/,f:b(" ")},{re:/^\{/,f:b("{")},{re:/^\}/,f:b("}")},{re:/^\[/,f:b("[")},{re:/^\]/,f:b("]")},{re:/^,/,f:b(",")},{re:/^:/,f:b(":")},{re:/^(true|false|null)/,f:b("keyword")},{re:/^\-?\d+(\.\d+)?([eE][+-]?\d+)?/,f:g},{re:/^"([^"\\]|\\["bnrtf\\]|\\u[0-9a-fA-F]{4})*"/,f:d}];return a&&(h=h.concat([{re:/^'(([^'\\]|\\['bnrtf\\]|\\u[0-9a-fA-F]{4})*)'/,f:c},{re:/^\/\/.*?\n/,f:f},{re:/^\/\*[\s\S]*?\*\//,f:f},{re:/^[a-zA-Z0-9_\-+\.\*\?!\|&%\^\/#\\]+/,f:e}])),h}function d(a){return a.reduce(function(a,b){if(0!==a.length&&("]"===b.type||"}"===b.type))for(var c=a.length-1;;){if(" "!==a[c].type){","===a[c].type&&a.splice(c,1);break}c-=1}return a.push(b),a},[])}function e(a){var b=k(a);return b=d(b),b.reduce(function(a,b){return a+b.match},"")}function f(a,b){var c=a[b.pos];if(b.pos+=1,!c){var d=new SyntaxError("Unexpected end-of-file");throw d}return c}function g(a,b){var c,d,e,g,h=f(a,b),j={};switch(h.type){case"}":return{};case"string":if(c=h.value,d=f(a,b),":"!==d.type)throw g=new SyntaxError("Unexpected token: "+d.type+", expected colon"),g.line=h.line,g;e=i(a,b),e=b.reviver?b.reviver(c,e):e,void 0!==e&&(j[c]=e);break;default:throw g=new SyntaxError("Unexpected token: "+h.type+", expected string or }"),g.line=h.line,g}for(;;)switch(h=f(a,b),h.type){case"}":return j;case",":if(h=f(a,b),"string"!==h.type)throw g=new SyntaxError("Unexpected token: "+h.type+", expected string"),g.line=h.line,g;if(c=h.value,d=f(a,b),":"!==d.type)throw g=new SyntaxError("Unexpected token: "+d.type+", expected colon"),g.line=h.line,g;e=i(a,b),e=b.reviver?b.reviver(c,e):e,void 0!==e&&(j[c]=e);break;default:throw g=new SyntaxError("Unexpected token: "+h.type+", expected , or }"),g.line=h.line,g}}function h(a,b){var c,d,e=f(a,b),g=[],h=0;switch(e.type){case"]":return[];default:a.unshift(e),c=i(a,b),g[h]=b.reviver?b.reviver(""+h,c):c}for(;;)switch(e=f(a,b),e.type){case"]":return g;case",":h+=1,c=i(a,b),g[h]=b.reviver?b.reviver(""+h,c):c;break;default:throw d=new SyntaxError("Unexpected token: "+e.type+", expected , or }"),d.line=e.line,d}}function i(a,b,c){b.tolerant&&!b.warnings&&(b.warnings=[]);var d,e,i,j=f(a,b);switch(j.type){case"{":d=g(a,b);break;case"[":d=h(a,b);break;case"string":case"number":d=j.value;break;case"keyword":switch(j.match){case"null":d=null;break;case"true":d=!0;break;case"false":d=!1}break;default:throw e=new SyntaxError("Unexpected token: "+j.type),e.line=j.line,e}if(c&&(d=b.reviver?b.reviver("",d):d),c&&b.pos<a.length){if(i="Unexpected token: "+a[b.pos].type+", expected end-of-input",!b.tolerant)throw e=new SyntaxError(i),e.line=a[b.pos].line,e;b.warnings.push({line:a[b.pos].line,message:i})}if(c&&b.tolerant&&0!==b.warnings.length)throw i=1===b.warnings.length?b.warnings[0].message:b.warnings.length+" parse warnings",e=new SyntaxError(i),e.line=b.warnings[0].line,e.warnings=b.warnings,e.obj=d,e;return d}function j(a,b){if("function"==typeof b||void 0===b)return JSON.parse(e(a),b);if(new Object(b)!==b)throw new TypeError("opts/reviver should be undefined, a function or an object");if(b.relaxed=void 0!==b.relaxed?b.relaxed:!0,b.warnings=void 0!==b.warnings?b.warnings:!1,!b.warnings&&!b.relaxed)return JSON.parse(a,b.reviver);var c=b.relaxed?k(a):l(a);if(b.relaxed&&(c=d(c)),b.warnings){c=c.filter(function(a){return" "!==a.type});var f={pos:0,reviver:b.reviver,tolerant:b.tolerant};return i(c,f,!0)}var g=c.reduce(function(a,b){return a+b.match},"");return JSON.parse(g,b.reviver)}var k=b(c(!0)),l=b(c(!1)),m={transform:e,parse:j};"undefined"!=typeof window?window.RJSON=m:"undefined"!=typeof module&&(module.exports=m)}();
//# sourceMappingURL=relaxed-json.min.js.map