!function(){"use strict";function a(a,b){for(var c=!1,d=0;d<a.length;d++)if(c=b(a[d],d,a))return c;return c}function b(b){return function(c){function d(){return a(b,function(a){var b=a.re.exec(c);if(b){var d=b[0];return c=c.slice(d.length),{raw:d,matched:a.f(b,f)}}})}for(var e=[],f=1;""!==c;){var g=d();if(!g){var h=new SyntaxError("Unexpected character: "+c[0]);throw h.line=f,h}g.matched.line=f,f+=g.raw.replace(/[^\n]/g,"").length,e.push(g.matched)}return e}}function c(a){function b(a){return function(b){return{type:a,match:b[0]}}}function c(a){var b=a[1].replace(/([^'\\]|\\['bnrtf\\]|\\u[0-9a-fA-F]{4})/g,function(a){return'"'===a?'\\"':"\\'"===a?"'":a});return{type:"string",match:'"'+b+'"',value:JSON.parse('"'+b+'"')}}function d(a){return{type:"string",match:a[0],value:JSON.parse(a[0])}}function e(a){return{type:"string",value:a[0],match:'"'+a[0].replace(/./g,function(a){return"\\"===a?"\\\\":a})+'"'}}function f(a){return{type:" ",match:a[0].replace(/./g,function(a){return/\s/.test(a)?a:" "})}}function g(a){return{type:"number",match:a[0],value:parseFloat(a[0])}}function h(a){var b;switch(a[1]){case"null":b=null;break;case"true":b=!0;break;case"false":b=!1}return{type:"atom",match:a[0],value:b}}var i=[{re:/^\s+/,f:b(" ")},{re:/^\{/,f:b("{")},{re:/^\}/,f:b("}")},{re:/^\[/,f:b("[")},{re:/^\]/,f:b("]")},{re:/^,/,f:b(",")},{re:/^:/,f:b(":")},{re:/^(true|false|null)/,f:h},{re:/^\-?\d+(\.\d+)?([eE][+-]?\d+)?/,f:g},{re:/^"([^"\\]|\\["bnrtf\\]|\\u[0-9a-fA-F]{4})*"/,f:d}];return a&&(i=i.concat([{re:/^'(([^'\\]|\\['bnrtf\\]|\\u[0-9a-fA-F]{4})*)'/,f:c},{re:/^\/\/.*?\n/,f:f},{re:/^\/\*[\s\S]*?\*\//,f:f},{re:/^[a-zA-Z0-9_\-+\.\*\?!\|&%\^\/#\\]+/,f:e}])),i}function d(a){return a.reduce(function(a,b){if(0!==a.length&&("]"===b.type||"}"===b.type))for(var c=a.length-1;;){if(" "!==a[c].type){","===a[c].type&&a.splice(c,1);break}c-=1}return a.push(b),a},[])}function e(a){var b=m(a);return b=d(b),b.reduce(function(a,b){return a+b.match},"")}function f(a,b){var c=a[b.pos];if(b.pos+=1,!c){var d=0!==a.length?a[a.length-1].line:1;return{type:"eof",line:d}}return c}function g(a){switch(a.type){case"atom":case"string":case"number":return a.type+" "+a.match;case"eof":return"end-of-file";default:return a.type}}function h(a,b){var c=f(a,b);if(":"!==c.type){var d="Unexpected token: "+g(c)+", expected ':'";if(!b.tolerant){var e=new SyntaxError(d);throw e.line=c.line,e}b.warnings.push({message:d,line:c.line}),b.pos-=1}}function i(a,b){var c,d,e,i,j=f(a,b),l={};if("}"!==j.type&&"string"!==j.type){if(i="Unexpected token: "+g(j)+", expected '}' or string",!b.tolerant)throw e=new SyntaxError(i),e.line=j.line,e;b.warnings.push({message:i,line:j.line}),"eof"!==j.type&&"number"!==j.type&&"atom"!==j.type&&(b.pos-=1),j="number"===j.type||"atom"===j.type?{type:"string",value:""+j.value,line:j.line}:"eof"===j.type?{type:"}",line:j.line}:{type:"string",value:"null",line:j.line}}switch(j.type){case"}":return{};case"string":c=j.value,h(a,b),d=k(a,b),d=b.reviver?b.reviver(c,d):d,void 0!==d&&(l[c]=d)}for(;;){if(j=f(a,b),"}"!==j.type&&","!==j.type){i="Unexpected token: "+g(j)+", expected ',' or ']'";var m="eof"===j.type?"}":",";if(!b.tolerant)throw e=new SyntaxError(i),e.line=j.line,e;b.warnings.push({message:i+"; assuming '"+m+"'",line:j.line}),j={type:m,line:j.line},b.pos-=1}switch(j.type){case"}":return l;case",":if(j=f(a,b),"string"!==j.type){if(i="Unexpected token: "+g(j)+", expected string",!b.tolerant)throw e=new SyntaxError(i),e.line=j.line,e;b.warnings.push({message:i,line:j.line}),"number"===j.type||"atom"===j.type?j={type:"string",value:""+j.value,line:j.line}:(j={type:"string",value:"null",line:j.line},b.pos-=1)}if(c=j.value,b.duplicate&&Object.prototype.hasOwnProperty.call(l,c)){if(i="Duplicate key: "+c,!b.tolerant)throw e=new SyntaxError(i),e.line=j.line,e;b.warnings.push({message:i,line:j.line})}h(a,b),d=k(a,b),d=b.reviver?b.reviver(c,d):d,void 0!==d&&(l[c]=d)}}}function j(a,b){var c,d,e,h=f(a,b),i=[],j=0;switch(b.tolerant&&"eof"===h.type&&(b.warnings.push({message:"Unexpected token: "+g(h)+", expected ']' or json object",line:h.line}),h.type="]"),h.type){case"]":return[];default:b.pos-=1,c=k(a,b),i[j]=b.reviver?b.reviver(""+j,c):c}for(;;){if(h=f(a,b),"]"!==h.type&&","!==h.type){e="Unexpected token: "+g(h)+", expected ',' or ']'";var l="eof"===h.type?"]":",";if(!b.tolerant)throw d=new SyntaxError(e),d.line=h.line,d;b.warnings.push({message:e+"; assuming '"+l+"'",line:h.line}),h={type:l,line:h.line},b.pos-=1}switch(h.type){case"]":return i;case",":j+=1,c=k(a,b),i[j]=b.reviver?b.reviver(""+j,c):c}}}function k(a,b,c){var d,e,h,k=f(a,b);switch(k.type){case"{":d=i(a,b);break;case"[":d=j(a,b);break;case"string":case"number":case"atom":d=k.value;break;default:if(h="Unexpected token: "+g(k)+", expected '[', '{', number, string or atom",!b.tolerant)throw e=new SyntaxError,e.line=k.line,e;b.warnings.push({message:h+"; assuming null",line:k.line}),d=null}if(c&&(d=b.reviver?b.reviver("",d):d),c&&b.pos<a.length){if(h="Unexpected token: "+g(a[b.pos])+", expected end-of-input",!b.tolerant)throw e=new SyntaxError(h),e.line=a[b.pos].line,e;b.warnings.push({message:h,line:a[b.pos].line})}if(c&&b.tolerant&&0!==b.warnings.length)throw h=1===b.warnings.length?b.warnings[0].message:b.warnings.length+" parse warnings",e=new SyntaxError(h),e.line=b.warnings[0].line,e.warnings=b.warnings,e.obj=d,e;return d}function l(a,b){if("function"==typeof b||void 0===b)return JSON.parse(e(a),b);if(new Object(b)!==b)throw new TypeError("opts/reviver should be undefined, a function or an object");if(b.relaxed=void 0!==b.relaxed?b.relaxed:!0,b.warnings=b.warnings||b.tolerant||!1,b.tolerant=b.tolerant||!1,b.duplicate=b.duplicate||!1,!b.warnings&&!b.relaxed)return JSON.parse(a,b.reviver);var c=b.relaxed?m(a):n(a);if(b.relaxed&&(c=d(c)),b.warnings){c=c.filter(function(a){return" "!==a.type});var f={pos:0,reviver:b.reviver,tolerant:b.tolerant,duplicate:b.duplicate,warnings:[]};return k(c,f,!0)}var g=c.reduce(function(a,b){return a+b.match},"");return JSON.parse(g,b.reviver)}var m=b(c(!0)),n=b(c(!1)),o={transform:e,parse:l};"undefined"!=typeof window?window.RJSON=o:"undefined"!=typeof module&&(module.exports=o)}();
//# sourceMappingURL=relaxed-json.min.js.map